<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=no">
  <title>Canvas Animation</title>

  <!-- Scripts externos -->
  <script type="text/javascript" src="libs.min.js"></script>
  <script type="text/javascript" src="assets.js"></script>
  <script type="text/javascript" src="Util.js"></script>
  <script type="text/javascript" src="Config.js"></script>
  <script type="text/javascript" src="Piece.js"></script>

  <!-- Estilos -->
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background-color: rgb(0, 0, 0);
    }
    #output {
      color: white;
      z-index: 1;
      position: absolute;
      left: 10px;
      top: 10px;
      font-size: 10px;
    }
    #myCanvas {
      position: absolute;
      z-index: 2;
      left: 0;
      top: 0;
      width: 100vw;
      height: 100vh;
    }
    
    #carImage {
      position: absolute;
      z-index: 3;
      bottom: -45%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 470px;
      height: 60vh;
      pointer-events: none;
      transition: transform 0.1s;
    }

    /* Estilos para las líneas de texto secuenciales */
    .text-sequence {
      position: absolute;
      top: 20%;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      text-align: center;
      font-size: 1.5em;
      z-index: 4;
    }

    .text-line {
      display: none; /* Oculta todas las líneas inicialmente */
    }
  </style>
</head>

<body onload="init('myCanvas', Piece, Config); startTextSequence();">

  <!-- Canvas para animaciones -->
  <canvas id="myCanvas" width="300" height="1530"></canvas>

  <!-- Imagen del auto -->
  <img id="carImage" src="Aston_Martin_Valkyrie.png" alt="Aston Martin Valkyrie" />

  <!-- Div para mostrar información adicional -->
  <div id="output">.</div>

  <!-- Contenedor para la secuencia de líneas de texto -->
  <div class="text-sequence" id="textSequence">
    <div class="text-line">                </div>
    <div class="text-line">Espero que...</div>
    <div class="text-line">obtengas todo lo que podrías pedir</div>
    <div class="text-line">El lado frío de tu almohada</div>
    <div class="text-line">un verdadero descanso por una vez</div>
    <div class="text-line">Un buen té de menta</div>
    <div class="text-line">con viento fresco en el camino a casa</div>
    <div class="text-line">Sin tráfico en millas,</div>
    <div class="text-line">para que llegue la primavera</div>
    
    <div class="text-line">Juro que no estaba</div>
    <div class="text-line">buscando mucho</div>
    <div class="text-line">Pero fue justo cuando apareciste</div>
    <div class="text-line">Pero fue justo cuando apareciste</div>
    <div class="text-line">                                </div>
    <div class="text-line">Estuve tan cerca de recoger mis pertenencias</div>
    <div class="text-line">Pero fue justo cuando apareciste</div>
    <div class="text-line">Y luego apareciste</div>
    <div class="text-line">Y luego apareciste</div>
    <div class="text-line">(Luego apareciste)</div>
    
    <div class="text-line">Ahora tengo la cara roja</div>
    <div class="text-line">y tímida de repente</div>
    <div class="text-line">Te mueves, yo me muevo</div>
    <div class="text-line">es algo, encajas perfectamente</div>
    <div class="text-line">Y reemplazas cada juego,</div>
    <div class="text-line">no presionas ninguno de mis botones</div>
    <div class="text-line">Y me sostienes durante la mañana,</div>
    <div class="text-line">algo nuevo para mí</div>
    <div class="text-line">algo nuevo para mí</div>
    <div class="text-line">                                </div>

    <div class="text-line">Juro que no estaba</div>
    <div class="text-line">buscando mucho</div>
    <div class="text-line">Pero fue justo cuando apareciste</div>
    <div class="text-line">Pero fue justo cuando apareciste</div>
    <div class="text-line">                                </div>
    <div class="text-line">Estuve tan cerca de recoger mis pertenencias</div>
    <div class="text-line">Pero fue justo cuando apareciste</div>
    <div class="text-line">Y sucedió</div>
    <div class="text-line">Entonces apareciste</div>
    <div class="text-line">Entonces tú apareciste</div>
    <div class="text-line">(Luego apareciste)</div>

    
    <!-- Añade más líneas si es necesario -->
  </div>

  <!-- Script para controlar la secuencia de texto -->
  <script>
    const duration = 3100; // Duración de aparición de cada línea (en milisegundos)
    let currentIndex = 0;
    let timer;
    let isActive = true;

    const textLines = document.querySelectorAll('.text-line');
    const totalLines = textLines.length;

    // Función para mostrar la siguiente línea de texto
    function showNextLine() {
      if (!isActive) return;

      textLines[currentIndex].style.display = 'none'; // Oculta la línea actual
      currentIndex = (currentIndex + 1) % totalLines; // Avanza al siguiente índice
      textLines[currentIndex].style.display = 'block'; // Muestra la nueva línea
    }

    // Inicia la secuencia de aparición de texto
    function startTextSequence() {
      timer = setInterval(showNextLine, duration);
    }

    // Pausa la secuencia cuando no hay actividad
    function resetActivityTimer() {
      isActive = true;
      clearTimeout(activityTimeout);
      activityTimeout = setTimeout(() => isActive = false, 5000);
    }

    let activityTimeout = setTimeout(() => isActive = false, 5000);
    window.addEventListener('mousemove', resetActivityTimer);
    window.addEventListener('keydown', resetActivityTimer);
    window.addEventListener('click', resetActivityTimer);
  </script>
</body>
</html>
